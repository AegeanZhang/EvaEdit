# TextEdit 引擎设计文档

## 概述
EvaEdit 的自定义文本编辑引擎，提供高性能的文本编辑、语法高亮、搜索替换等功能。

## 架构设计

### 核心组件

#### 1. TextEditEngine (C++)
主要的文本编辑引擎，负责文档管理和核心功能。

#### 2. TextDocument (C++)
文档模型，管理文本内容、行列信息、修改历史等。

#### 3. TextRenderer (QML)
文本渲染器，负责文本的可视化显示。

#### 4. SyntaxHighlighter (C++)
语法高亮器，支持多种编程语言的语法高亮。

#### 5. SearchEngine (C++)
搜索和替换引擎，支持正则表达式。

## 功能特性

- 📝 高性能文本编辑
- 🎨 语法高亮
- 🔍 搜索和替换
- ↩️ 撤销/重做
- 📏 行号显示
- 🖱️ 鼠标选择
- ⌨️ 键盘快捷键
- 📋 剪贴板操作
- 🔄 自动保存
- 📊 性能监控

## 实现细节

### 文本存储
使用 QTextDocument 作为底层存储，配合自定义的行管理器实现高效的文本操作。

### 渲染优化
- 虚拟化滚动：只渲染可见区域的文本
- 增量更新：只重绘发生变化的区域
- 字体缓存：缓存常用字符的渲染结果

### 内存管理
- 大文件分块加载
- 延迟加载非可见内容
- 智能垃圾回收

## 使用方式
